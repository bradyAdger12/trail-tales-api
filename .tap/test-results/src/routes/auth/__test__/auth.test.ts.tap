TAP version 14
# Subtest: GET /health
    ok 1 - should be equivalent
    1..1
ok 1 - GET /health # time=293.121ms

# Subtest: POST /login - user cannot login without email
    ok 1 - should be equal
    ok 2 - should be equal
    1..2
ok 2 - POST /login - user cannot login without email # time=159.553ms

# Subtest: POST /login - user cannot login without password
    ok 1 - should be equal
    ok 2 - should be equal
    1..2
ok 3 - POST /login - user cannot login without password # time=54.583ms

# Subtest: POST /login - invalid credentials
    ok 1 - should be equal
    ok 2 - should be equal
    1..2
ok 4 - POST /login - invalid credentials # time=78.166ms

# Subtest: POST /register - password must be 8 characters
    ok 1 - should be equal
    not ok 2 - should be equal
      ---
      compare: ===
      at:
        fileName: src\routes\auth\__test__\auth.test.ts
        lineNumber: 56
        columnNumber: 7
        typeName: Test
        generated:
          fileName: src/routes/auth/__test__/auth.test.ts
          lineNumber: 51
          columnNumber: 7
      stack: |
        Test.<anonymous> (src/routes/auth/__test__/auth.test.ts:56:7)
      source: "    const response = await fastify.inject({ method: 'POST', url:
        '/register', payload: { email, password: 'foobar', display_name } })\r
      
        \    t.equal(response.statusCode, 400)\r
      
        \    t.equal(response.json().message, 'Password must be at least 8 characters
        long')\r
      
        ------^
      
        \r
      
        \    t.teardown(async () => {\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -Password must be at least 8 characters long
        +undefined
      ...
    
    1..2
not ok 5 - POST /register - password must be 8 characters # time=74.438ms
  ---
  at:
    fileName: src\routes\auth\__test__\auth.test.ts
    lineNumber: 52
    columnNumber: 6
    typeName: Object
    generated:
      fileName: src/routes/auth/__test__/auth.test.ts
      lineNumber: 47
      columnNumber: 16
  source: "})\r
  
    \r
  
    test('POST /register - password must be 8 characters', async (t) => {\r
  
    -----^
  
    \    const fastify = await buildServer()\r
  
    \    const response = await fastify.inject({ method: 'POST', url: '/register',
    payload: { email, password: 'foobar', display_name } })\n"
  ...

# Subtest: POST /register - success
    not ok 1 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,3 +1,3 @@
         Object {
        -  "success": true,
        +  "error": "Bad Request",
         }
      at:
        fileName: src\routes\auth\__test__\auth.test.ts
        lineNumber: 66
        columnNumber: 7
        typeName: Test
        generated:
          fileName: src/routes/auth/__test__/auth.test.ts
          lineNumber: 59
          columnNumber: 7
      stack: |
        Test.<anonymous> (src/routes/auth/__test__/auth.test.ts:66:7)
      source: "    const fastify = await buildServer()\r
      
        \    const response = await fastify.inject({ method: 'POST', url: '/register',
        payload: { email, password, display_name } })\r
      
        \    t.same(response.json(), { success: true })\r
      
        ------^
      
        \r
      
        \    t.teardown(async () => {\n"
      ...
    
    1..1
not ok 6 - POST /register - success # time=69.906ms
  ---
  at:
    fileName: src\routes\auth\__test__\auth.test.ts
    lineNumber: 63
    columnNumber: 6
    typeName: Object
    generated:
      fileName: src/routes/auth/__test__/auth.test.ts
      lineNumber: 56
      columnNumber: 16
  source: "})\r
  
    \r
  
    test('POST /register - success', async (t) => {\r
  
    -----^
  
    \    const fastify = await buildServer()\r
  
    \    const response = await fastify.inject({ method: 'POST', url: '/register',
    payload: { email, password, display_name } })\n"
  ...

# Subtest: POST /login - success
    not ok 1 - should have all specified properties
      ---
      at:
        fileName: src\routes\auth\__test__\auth.test.ts
        lineNumber: 76
        columnNumber: 7
        typeName: Test
        generated:
          fileName: src/routes/auth/__test__/auth.test.ts
          lineNumber: 67
          columnNumber: 7
      stack: |
        Test.<anonymous> (src/routes/auth/__test__/auth.test.ts:76:7)
      source: "    const fastify = await buildServer()\r
      
        \    const response = await fastify.inject({ method: 'POST', url: '/login',
        payload: { email, password } })\r
      
        \    t.hasProps(response.json(), ['token', 'refreshToken', 'user'])\r
      
        ------^
      
        \r
      
        \    t.teardown(async () => {\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,5 +1,3 @@
        -Array [
        -  "token",
        -  "refreshToken",
        -  "user",
        -]
        +Object {
        +  "message": "Username or password is incorrect",
        +}
      ...
    
    1..1
not ok 7 - POST /login - success # time=59.88ms
  ---
  at:
    fileName: src\routes\auth\__test__\auth.test.ts
    lineNumber: 73
    columnNumber: 6
    typeName: Object
    generated:
      fileName: src/routes/auth/__test__/auth.test.ts
      lineNumber: 64
      columnNumber: 16
  source: "})\r
  
    \r
  
    test('POST /login - success', async (t) => {\r
  
    -----^
  
    \    const fastify = await buildServer()\r
  
    \    const response = await fastify.inject({ method: 'POST', url: '/login',
    payload: { email, password } })\n"
  ...

# Subtest: POST /register - email already exists
    not ok 1 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -"User with same email exists"
        +undefined
      at:
        fileName: src\routes\auth\__test__\auth.test.ts
        lineNumber: 87
        columnNumber: 7
        typeName: Test
        generated:
          fileName: src/routes/auth/__test__/auth.test.ts
          lineNumber: 76
          columnNumber: 7
      stack: |
        Test.<anonymous> (src/routes/auth/__test__/auth.test.ts:87:7)
      source: "    await fastify.inject({ method: 'POST', url: '/register', payload: {
        email, password, display_name } })\r
      
        \    const response1 = await fastify.inject({ method: 'POST', url:
        '/register', payload: { email, password, display_name } })\r
      
        \    t.same(response1.json().message, 'User with same email exists')\r
      
        ------^
      
        \r
      
        \    t.teardown(async () => {\n"
      ...
    
    1..1
not ok 8 - POST /register - email already exists # time=55.666ms
  ---
  at:
    fileName: src\routes\auth\__test__\auth.test.ts
    lineNumber: 83
    columnNumber: 6
    typeName: Object
    generated:
      fileName: src/routes/auth/__test__/auth.test.ts
      lineNumber: 72
      columnNumber: 16
  source: "})\r
  
    \r
  
    test('POST /register - email already exists', async (t) => {\r
  
    -----^
  
    \    const fastify = await buildServer()\r
  
    \    await fastify.inject({ method: 'POST', url: '/register', payload: {
    email, password, display_name } })\n"
  ...

1..8
